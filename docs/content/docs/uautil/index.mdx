---
title: User-Agent å·¥å…·åŒ… (uautil)
description: ä¸“ä¸º Web åº”ç”¨è®¾è®¡çš„ User-Agent æ£€æµ‹å’Œæœºå™¨äººè¿‡æ»¤å·¥å…·åŒ…
---

# User-Agent å·¥å…·åŒ… (uautil)

`uautil` æ˜¯ä¸“ä¸º Web åº”ç”¨è®¾è®¡çš„ User-Agent æ£€æµ‹å’Œæœºå™¨äººè¿‡æ»¤å·¥å…·åŒ…ï¼Œå¸®åŠ©ä½ è½»æ¾æ‹¦æˆªæ¶æ„çˆ¬è™«ï¼ŒåŒæ—¶ä¿ç•™åˆæ³•æœç´¢å¼•æ“è®¿é—®ã€‚

## ğŸ¯ è®¾è®¡ç›®æ ‡

- **ç®€å•æ˜“ç”¨**: å‡½æ•°æ¥å£ç®€æ´æ˜äº†ï¼Œå¼€ç®±å³ç”¨
- **æ™ºèƒ½è¯†åˆ«**: å†…ç½®å¸¸è§æœºå™¨äººç‰¹å¾ï¼Œæ™ºèƒ½è¯†åˆ«æ¶æ„çˆ¬è™«
- **çµæ´»é…ç½®**: æ”¯æŒè‡ªå®šä¹‰æœºå™¨äººç‰¹å¾å’Œåˆæ³•çˆ¬è™«ç™½åå•
- **é›¶ä¾èµ–**: åŸºäº Go æ ‡å‡†åº“å®ç°ï¼Œæ— å¤–éƒ¨ä¾èµ–
- **æ€§èƒ½ä¼˜å…ˆ**: é«˜æ•ˆçš„å®ç°ï¼Œé€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯

## ğŸ“¦ å®‰è£…

```bash
go get github.com/woodchen-ink/go-web-utils/uautil
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

```go
import "github.com/woodchen-ink/go-web-utils/uautil"

func handler(w http.ResponseWriter, r *http.Request) {
    // æ£€æµ‹æ˜¯å¦ä¸ºæœºå™¨äººï¼ˆæ‹¦æˆªæ‰€æœ‰æœºå™¨äººï¼‰
    if uautil.IsBot(r, false) {
        http.Error(w, "Bot access denied", http.StatusForbidden)
        return
    }

    // æ­£å¸¸å¤„ç†è¯·æ±‚
    w.Write([]byte("Welcome!"))
}
```

### SEO å‹å¥½æ¨¡å¼

```go
// å…è®¸åˆæ³•æœç´¢å¼•æ“çˆ¬è™«ï¼ˆGoogleã€Bing ç­‰ï¼‰ï¼Œä½†æ‹¦æˆªæ¶æ„çˆ¬è™«
if uautil.IsBot(r, true) {
    http.Error(w, "Malicious bot detected", http.StatusForbidden)
    return
}
```

### ä½¿ç”¨ä¸­é—´ä»¶

```go
import "github.com/woodchen-ink/go-web-utils/uautil"

func main() {
    // åˆ›å»ºä½ çš„å¤„ç†å™¨
    handler := http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        w.Write([]byte("Welcome!"))
    })

    // åº”ç”¨æœºå™¨äººæ‹¦æˆªä¸­é—´ä»¶
    // allowLegitimate=true: å…è®¸åˆæ³•æœç´¢å¼•æ“
    middleware := uautil.BlockBotMiddleware(true, "Access denied")
    protectedHandler := middleware(handler)

    http.ListenAndServe(":8080", protectedHandler)
}
```

### ä»…å…è®¸æµè§ˆå™¨è®¿é—®

```go
func main() {
    handler := http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        w.Write([]byte("æ¬¢è¿ä½¿ç”¨æµè§ˆå™¨è®¿é—®"))
    })

    // ä»…å…è®¸æµè§ˆå™¨è®¿é—®,æ‹¦æˆªæ‰€æœ‰éæµè§ˆå™¨è¯·æ±‚
    middleware := uautil.BrowserOnlyMiddleware("ä»…æ”¯æŒæµè§ˆå™¨è®¿é—®")
    protectedHandler := middleware(handler)

    http.ListenAndServe(":8080", protectedHandler)
}
```

## ğŸ“š åŠŸèƒ½åˆ—è¡¨

### æœºå™¨äººæ£€æµ‹

- [IsBot](/docs/uautil/is-bot) - æ£€æµ‹è¯·æ±‚æ˜¯å¦æ¥è‡ªæœºå™¨äºº
- [IsBotUserAgent](/docs/uautil/is-bot-user-agent) - ç›´æ¥æ£€æµ‹ User-Agent å­—ç¬¦ä¸²
- [BlockBotMiddleware](/docs/uautil/block-bot-middleware) - HTTP ä¸­é—´ä»¶æ‹¦æˆªæœºå™¨äºº
- [AddCustomBotPattern](/docs/uautil/custom-patterns) - æ·»åŠ è‡ªå®šä¹‰æœºå™¨äººç‰¹å¾

### æµè§ˆå™¨æ£€æµ‹

- [IsBrowser](/docs/uautil/is-browser) - æ£€æµ‹è¯·æ±‚æ˜¯å¦æ¥è‡ªçœŸå®æµè§ˆå™¨
- [IsBrowserUserAgent](/docs/uautil/is-browser-user-agent) - ç›´æ¥æ£€æµ‹ User-Agent å­—ç¬¦ä¸²æ˜¯å¦ä¸ºæµè§ˆå™¨
- [BrowserOnlyMiddleware](/docs/uautil/browser-only-middleware) - ä»…å…è®¸æµè§ˆå™¨è®¿é—®çš„ä¸­é—´ä»¶
- [AddCustomBrowserPattern](/docs/uautil/add-custom-browser-pattern) - æ·»åŠ è‡ªå®šä¹‰æµè§ˆå™¨ç‰¹å¾
- [GetBrowserPatterns](/docs/uautil/get-browser-patterns) - è·å–å½“å‰æµè§ˆå™¨ç‰¹å¾åˆ—è¡¨

## ğŸ¤– å†…ç½®æœºå™¨äººç‰¹å¾

### æ¶æ„æœºå™¨äºº/å·¥å…·
- `python-requests`, `python-urllib`
- `curl`, `wget`
- `scrapy`, `selenium`, `phantomjs`
- `nmap`, `sqlmap`, `nikto` ç­‰æ‰«æå™¨
- å…¶ä»–å¸¸è§çˆ¬è™«å·¥å…·

### åˆæ³•æœç´¢å¼•æ“çˆ¬è™«
- Google (`googlebot`)
- Bing (`bingbot`)
- Baidu (`baiduspider`)
- Yahoo (`slurp`)
- DuckDuckGo (`duckduckbot`)
- ç¤¾äº¤åª’ä½“çˆ¬è™«ï¼ˆFacebook, Twitter, LinkedIn ç­‰ï¼‰

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
go test github.com/woodchen-ink/go-web-utils/uautil

# æŸ¥çœ‹è¦†ç›–ç‡
go test github.com/woodchen-ink/go-web-utils/uautil -cover
```

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### æœºå™¨äººé˜²æŠ¤

1. **ä¿æŠ¤ API**: é˜²æ­¢æ¶æ„çˆ¬è™«æ¶ˆè€—æœåŠ¡å™¨èµ„æº
2. **é˜²æ­¢å†…å®¹ç›—å–**: æ‹¦æˆªè‡ªåŠ¨åŒ–çˆ¬è™«å·¥å…·
3. **SEO ä¼˜åŒ–**: å…è®¸æœç´¢å¼•æ“çˆ¬è™«ï¼Œæ‹¦æˆªæ¶æ„æœºå™¨äºº
4. **æµé‡æ§åˆ¶**: å‡å°‘æœºå™¨äººäº§ç”Ÿçš„æ— æ•ˆæµé‡
5. **å®‰å…¨é˜²æŠ¤**: æ‹¦æˆªæ‰«æå™¨å’Œæ¼æ´æ¢æµ‹å·¥å…·

### æµè§ˆå™¨æ£€æµ‹

1. **Web åº”ç”¨ä¿æŠ¤**: ç¡®ä¿ Web ç•Œé¢åªèƒ½é€šè¿‡æµè§ˆå™¨è®¿é—®
2. **å†…å®¹é˜²ç›—**: é˜²æ­¢çˆ¬è™«å’Œè‡ªåŠ¨åŒ–å·¥å…·æŠ“å–å†…å®¹
3. **ç”¨æˆ·ä½“éªŒ**: ä¸ºæµè§ˆå™¨ç”¨æˆ·æä¾›ç‰¹å®šåŠŸèƒ½ï¼Œæ‹¦æˆªéæµè§ˆå™¨å®¢æˆ·ç«¯
4. **æ··åˆåº”ç”¨**: åŒºåˆ† API è¯·æ±‚å’Œ Web é¡µé¢è¯·æ±‚
5. **ç»Ÿè®¡åˆ†æ**: å‡†ç¡®ç»Ÿè®¡çœŸå®æµè§ˆå™¨ç”¨æˆ·è®¿é—®é‡
